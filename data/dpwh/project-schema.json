{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "DPWH Projects Dataset",
  "description": "Schema for DPWH infrastructure project detailed data",
  "type": "object",
  "required": ["data"],
  "properties": {
    "data": {
      "type": "array",
      "description": "Array of DPWH project records",
      "items": {
        "type": "object",
        "required": [
          "contractId",
          "description",
          "category",
          "status",
          "budget",
          "amountPaid",
          "progress",
          "location",
          "infraType",
          "contractor",
          "startDate",
          "infraYear",
          "programName",
          "sourceOfFunds",
          "isLive",
          "latitude",
          "longitude"
        ],
        "properties": {
          "contractId": {
            "type": "string",
            "description": "Unique contract identifier",
            "pattern": "^[0-9]{2}[A-Z]{2}[0-9]{4}$",
            "examples": ["22DJ0023", "19HF0069", "23CJ0248"]
          },
          "description": {
            "type": "string",
            "description": "Detailed description of the project"
          },
          "category": {
            "type": "string",
            "description": "Primary infrastructure category",
            "examples": ["Roads", "Bridges", "Buildings and Facilities", "Water Provision and Storage", "Flood Control Structures"]
          },
          "status": {
            "type": "string",
            "description": "Current project status",
            "enum": ["Completed", "On-Going", "Not Started", "For Procurement", "Terminated"]
          },
          "budget": {
            "type": "number",
            "description": "Total project budget in PHP",
            "minimum": 0
          },
          "amountPaid": {
            "type": "number",
            "description": "Amount paid so far in PHP",
            "minimum": 0
          },
          "progress": {
            "type": "number",
            "description": "Project completion percentage",
            "minimum": 0,
            "maximum": 100
          },
          "location": {
            "type": "object",
            "description": "Geographic location details",
            "required": ["region", "province", "infraType"],
            "properties": {
              "region": {
                "type": "string",
                "description": "Philippine region",
                "examples": ["Region IV-A", "Region VII", "Region I", "NCR", "CAR", "BARMM"]
              },
              "province": {
                "type": "string",
                "description": "Province or District Engineering Office",
                "examples": ["Quezon 2nd DEO", "Cebu 3rd DEO"]
              },
              "infraType": {
                "type": "string",
                "description": "Infrastructure type",
                "examples": ["Roads", "Bridges", "Buildings"]
              },
              "coordinates": {
                "type": "object",
                "description": "Location coordinates",
                "properties": {
                  "latitude": {
                    "type": "number",
                    "minimum": -90,
                    "maximum": 90
                  },
                  "longitude": {
                    "type": "number",
                    "minimum": -180,
                    "maximum": 180
                  },
                  "verified": {
                    "type": "boolean",
                    "description": "Whether coordinates have been verified"
                  }
                }
              }
            }
          },
          "infraType": {
            "type": "string",
            "description": "Infrastructure type",
            "examples": ["Roads", "Bridges", "Buildings"]
          },
          "contractor": {
            "type": "string",
            "description": "Name of the contractor (may include PCAB ID in parentheses)"
          },
          "startDate": {
            "type": "string",
            "description": "Project start date",
            "format": "date",
            "pattern": "^[0-9]{4}-[0-9]{2}-[0-9]{2}$"
          },
          "completionDate": {
            "type": ["string", "null"],
            "description": "Project completion date (null if not completed)",
            "format": "date",
            "pattern": "^[0-9]{4}-[0-9]{2}-[0-9]{2}$"
          },
          "infraYear": {
            "type": "string",
            "description": "Infrastructure year",
            "pattern": "^[0-9]{4}$"
          },
          "contractEffectivityDate": {
            "type": "string",
            "description": "Contract effectivity date",
            "format": "date"
          },
          "expiryDate": {
            "type": "string",
            "description": "Contract expiry date",
            "format": "date"
          },
          "nysReason": {
            "type": ["string", "null"],
            "description": "Not Yet Started reason (null if not applicable)"
          },
          "programName": {
            "type": "string",
            "description": "Program name",
            "examples": ["Regular Infra", "Outside Infra"]
          },
          "sourceOfFunds": {
            "type": "string",
            "description": "Source of funding details",
            "examples": ["Regular Infra - GAA 2022 CSSP", "Regular Infra - GAA 2019 OO-1"]
          },
          "isVerifiedByDpwh": {
            "type": "boolean",
            "description": "Whether verified by DPWH"
          },
          "isVerifiedByPublic": {
            "type": "boolean",
            "description": "Whether verified by public"
          },
          "isLive": {
            "type": "boolean",
            "description": "Whether the project has a live stream"
          },
          "livestreamUrl": {
            "type": ["string", "null"],
            "description": "URL of the live stream (null if not available)",
            "format": "uri"
          },
          "livestreamVideoId": {
            "type": ["string", "null"],
            "description": "Video ID of the live stream (null if not available)"
          },
          "livestreamDetectedAt": {
            "type": ["string", "null"],
            "description": "Timestamp when live stream was detected (null if not detected)",
            "format": "date-time"
          },
          "components": {
            "type": "array",
            "description": "Array of project components",
            "items": {
              "type": "object",
              "properties": {
                "componentId": {
                  "type": "string",
                  "description": "Unique component identifier"
                },
                "description": {
                  "type": "string",
                  "description": "Component description"
                },
                "infraType": {
                  "type": "string",
                  "description": "Infrastructure type"
                },
                "typeOfWork": {
                  "type": "string",
                  "description": "Type of work",
                  "examples": ["Construction of Concrete Road", "Rehabilitation / Major Repair of Bridge"]
                },
                "region": {
                  "type": "string",
                  "description": "Region"
                },
                "province": {
                  "type": "string",
                  "description": "Province"
                },
                "coordinates": {
                  "type": "object",
                  "properties": {
                    "latitude": {
                      "type": "number"
                    },
                    "longitude": {
                      "type": "number"
                    },
                    "source": {
                      "type": "string",
                      "description": "Source of coordinates",
                      "examples": ["infra_track"]
                    },
                    "locationVerified": {
                      "type": "boolean"
                    }
                  }
                }
              }
            }
          },
          "winnerNames": {
            "type": "string",
            "description": "Name(s) of winning bidder(s)"
          },
          "bidders": {
            "type": "array",
            "description": "Array of bidders",
            "items": {
              "type": "object",
              "properties": {
                "name": {
                  "type": "string",
                  "description": "Bidder name with PCAB ID"
                },
                "pcabId": {
                  "type": "string",
                  "description": "PCAB (Philippine Contractors Accreditation Board) ID"
                },
                "participation": {
                  "type": "number",
                  "description": "Participation percentage",
                  "minimum": 0,
                  "maximum": 100
                },
                "isWinner": {
                  "type": "boolean",
                  "description": "Whether this bidder won the contract"
                }
              }
            }
          },
          "procurement": {
            "type": "object",
            "description": "Procurement details",
            "properties": {
              "contractName": {
                "type": "string",
                "description": "Contract name"
              },
              "abc": {
                "type": "string",
                "description": "Approved Budget for the Contract"
              },
              "status": {
                "type": "string",
                "description": "Procurement status"
              },
              "fundingInstrument": {
                "type": "string",
                "description": "Funding instrument",
                "examples": ["GOP-GOVERNMENT OF THE PHILIPPINES"]
              },
              "advertisementDate": {
                "type": "string",
                "description": "Advertisement date",
                "format": "date-time"
              },
              "bidSubmissionDeadline": {
                "type": "string",
                "description": "Bid submission deadline",
                "format": "date-time"
              },
              "dateOfAward": {
                "type": "string",
                "description": "Date of award",
                "format": "date-time"
              },
              "awardAmount": {
                "type": "string",
                "description": "Award amount"
              }
            }
          },
          "links": {
            "type": "object",
            "description": "Document links",
            "properties": {
              "advertisement": {
                "type": "string",
                "description": "Advertisement document URL"
              },
              "contractAgreement": {
                "type": "string",
                "description": "Contract agreement document URL"
              },
              "noticeOfAward": {
                "type": "string",
                "description": "Notice of award document URL"
              },
              "noticeToProceed": {
                "type": "string",
                "description": "Notice to proceed document URL"
              },
              "programOfWork": {
                "type": "string",
                "description": "Program of work document URL"
              },
              "engineeringDesign": {
                "type": "string",
                "description": "Engineering design document URL"
              }
            }
          },
          "latitude": {
            "type": "number",
            "description": "Primary latitude coordinate",
            "minimum": -90,
            "maximum": 90
          },
          "longitude": {
            "type": "number",
            "description": "Primary longitude coordinate",
            "minimum": -180,
            "maximum": 180
          },
          "coordinates": {
            "type": "array",
            "description": "Array of component coordinates",
            "items": {
              "type": "object",
              "properties": {
                "componentId": {
                  "type": "string"
                },
                "description": {
                  "type": "string"
                },
                "latitude": {
                  "type": "number"
                },
                "longitude": {
                  "type": "number"
                },
                "source": {
                  "type": "string"
                },
                "locationVerified": {
                  "type": "boolean"
                }
              }
            }
          },
          "imageSummary": {
            "type": "object",
            "description": "Summary of project images",
            "properties": {
              "totalImages": {
                "type": "integer",
                "description": "Total number of images",
                "minimum": 0
              },
              "latestImageDate": {
                "type": ["string", "null"],
                "description": "Date of latest image",
                "format": "date-time"
              },
              "hasImages": {
                "type": "boolean",
                "description": "Whether project has any images"
              }
            }
          }
        },
        "additionalProperties": false
      }
    }
  },
  "additionalProperties": false
}
