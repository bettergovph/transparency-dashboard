{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "DPWH Project Detail",
  "description": "Schema for DPWH infrastructure project detail",
  "type": "object",
  "required": [
    "contractId",
    "description",
    "category",
    "status",
    "budget",
    "amountPaid",
    "progress",
    "region",
    "province",
    "infraType",
    "contractor",
    "startDate",
    "infraYear",
    "programName",
    "sourceOfFunds",
    "isVerifiedByDpwh",
    "isVerifiedByPublic",
    "isLive",
    "latitude",
    "longitude"
  ],
  "properties": {
    "contractId": {
      "type": "string",
      "description": "Unique contract identifier",
      "pattern": "^[0-9]{2}[A-Z]{2}[0-9]{4}$",
      "examples": ["21NA0052", "23LF0026", "25DI0029"]
    },
    "description": {
      "type": "string",
      "description": "Detailed description of the project"
    },
    "category": {
      "type": "string",
      "description": "Primary infrastructure category",
      "examples": [
        "Roads",
        "Bridges",
        "Buildings and Facilities",
        "Water Provision and Storage",
        "Flood Control Structures"
      ]
    },
    "status": {
      "type": "string",
      "description": "Current project status",
      "enum": [
        "Completed",
        "On-Going",
        "Not Started",
        "For Procurement",
        "Terminated"
      ]
    },
    "budget": {
      "type": "number",
      "description": "Total project budget in PHP",
      "minimum": 0
    },
    "amountPaid": {
      "type": "number",
      "description": "Amount paid so far in PHP",
      "minimum": 0
    },
    "progress": {
      "type": "number",
      "description": "Project completion percentage",
      "minimum": 0,
      "maximum": 100
    },
    "region": {
      "type": "string",
      "description": "Philippine region",
      "pattern": "^Region (I{1,3}|IV-[AB]|V|VI{1,3}|IX|X{1,3}|XI{1,3}|CAR|NCR|BARMM)$"
    },
    "province": {
      "type": "string",
      "description": "Province or District Engineering Office"
    },
    "infraType": {
      "type": "string",
      "description": "Infrastructure type",
      "examples": ["Roads", "Bridges", "Buildings"]
    },
    "contractor": {
      "type": "string",
      "description": "Name of the contractor (may include contractor ID in parentheses)"
    },
    "startDate": {
      "type": "string",
      "description": "Project start date",
      "format": "date",
      "pattern": "^[0-9]{4}-[0-9]{2}-[0-9]{2}$"
    },
    "completionDate": {
      "type": ["string", "null"],
      "description": "Project completion date (null if not completed)",
      "format": "date",
      "pattern": "^[0-9]{4}-[0-9]{2}-[0-9]{2}$"
    },
    "infraYear": {
      "type": "string",
      "description": "Infrastructure year",
      "pattern": "^[0-9]{4}$"
    },
    "contractEffectivityDate": {
      "type": "string",
      "description": "Contract effectivity date",
      "format": "date",
      "pattern": "^[0-9]{4}-[0-9]{2}-[0-9]{2}$"
    },
    "expiryDate": {
      "type": "string",
      "description": "Contract expiry date",
      "format": "date",
      "pattern": "^[0-9]{4}-[0-9]{2}-[0-9]{2}$"
    },
    "nysReason": {
      "type": ["string", "null"],
      "description": "Reason for not yet started status (null if not applicable)"
    },
    "programName": {
      "type": "string",
      "description": "Program name",
      "examples": ["Regular Infra", "Outside Infra"]
    },
    "sourceOfFunds": {
      "type": "string",
      "description": "Source of funding details"
    },
    "isVerifiedByDpwh": {
      "type": "boolean",
      "description": "Whether the project is verified by DPWH"
    },
    "isVerifiedByPublic": {
      "type": "boolean",
      "description": "Whether the project is verified by the public"
    },
    "isLive": {
      "type": "boolean",
      "description": "Whether the project has a live stream"
    },
    "livestreamUrl": {
      "type": ["string", "null"],
      "description": "URL of the live stream (null if not available)",
      "format": "uri"
    },
    "livestreamVideoId": {
      "type": ["string", "null"],
      "description": "Video ID of the live stream (null if not available)"
    },
    "livestreamDetectedAt": {
      "type": ["string", "null"],
      "description": "Timestamp when live stream was detected (null if not detected)",
      "format": "date-time"
    },
    "latitude": {
      "type": "number",
      "description": "Primary latitude coordinate",
      "minimum": -90,
      "maximum": 90
    },
    "longitude": {
      "type": "number",
      "description": "Primary longitude coordinate",
      "minimum": -180,
      "maximum": 180
    },
    "coordinatesVerified": {
      "type": "boolean",
      "description": "Whether the coordinates are verified"
    },
    "components": {
      "type": "array",
      "description": "List of project components",
      "items": {
        "type": "object",
        "required": ["componentId", "description", "infraType", "typeOfWork", "region", "province"],
        "properties": {
          "componentId": {
            "type": "string",
            "description": "Unique component identifier"
          },
          "description": {
            "type": "string",
            "description": "Component description"
          },
          "infraType": {
            "type": "string",
            "description": "Infrastructure type"
          },
          "typeOfWork": {
            "type": "string",
            "description": "Type of work being performed"
          },
          "region": {
            "type": "string",
            "description": "Region"
          },
          "province": {
            "type": "string",
            "description": "Province"
          },
          "latitude": {
            "type": "number",
            "minimum": -90,
            "maximum": 90
          },
          "longitude": {
            "type": "number",
            "minimum": -180,
            "maximum": 180
          },
          "coordinatesSource": {
            "type": "string",
            "description": "Source of the coordinates"
          },
          "locationVerified": {
            "type": "boolean",
            "description": "Whether the location is verified"
          }
        }
      }
    },
    "winnerNames": {
      "type": "string",
      "description": "Names of winning bidders"
    },
    "bidders": {
      "type": "array",
      "description": "List of bidders",
      "items": {
        "type": "object",
        "required": ["name", "participation", "isWinner"],
        "properties": {
          "name": {
            "type": "string",
            "description": "Bidder name (may include PCAB ID in parentheses)"
          },
          "pcabId": {
            "type": "string",
            "description": "PCAB registration ID"
          },
          "participation": {
            "type": "number",
            "description": "Participation percentage",
            "minimum": 0,
            "maximum": 100
          },
          "isWinner": {
            "type": "boolean",
            "description": "Whether this bidder won the contract"
          }
        }
      }
    },
    "procurementContractName": {
      "type": "string",
      "description": "Procurement contract name"
    },
    "procurementAbc": {
      "type": "string",
      "description": "Approved Budget for the Contract"
    },
    "procurementStatus": {
      "type": "string",
      "description": "Procurement status code"
    },
    "procurementFundingInstrument": {
      "type": "string",
      "description": "Funding instrument details"
    },
    "procurementAdvertisementDate": {
      "type": "string",
      "description": "Advertisement date",
      "format": "date-time"
    },
    "procurementBidSubmissionDeadline": {
      "type": "string",
      "description": "Bid submission deadline",
      "format": "date-time"
    },
    "procurementDateOfAward": {
      "type": "string",
      "description": "Date of award",
      "format": "date-time"
    },
    "procurementAwardAmount": {
      "type": "string",
      "description": "Award amount"
    },
    "linkAdvertisement": {
      "type": "string",
      "description": "Advertisement document URL",
      "format": "uri"
    },
    "linkContractAgreement": {
      "type": "string",
      "description": "Contract agreement document URL",
      "format": "uri"
    },
    "linkNoticeOfAward": {
      "type": "string",
      "description": "Notice of award document URL",
      "format": "uri"
    },
    "linkNoticeToProceed": {
      "type": "string",
      "description": "Notice to proceed document URL",
      "format": "uri"
    },
    "linkProgramOfWork": {
      "type": "string",
      "description": "Program of work document URL"
    },
    "linkEngineeringDesign": {
      "type": "string",
      "description": "Engineering design document URL"
    },
    "totalImages": {
      "type": "integer",
      "description": "Total number of images",
      "minimum": 0
    },
    "latestImageDate": {
      "type": "string",
      "description": "Date of the latest image",
      "format": "date-time"
    },
    "hasImages": {
      "type": "boolean",
      "description": "Whether the project has images"
    }
  },
  "additionalProperties": false
}
